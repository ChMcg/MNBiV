# Задание:
1. Разработать  стек  на  языке ассемблер.  Демонстрация  возможностей  стека  на примере  принципа  стакана Вводим  набор символов,  с помощью  стека  выводим  в обратном  порядке. 
2. Продемонстрировать , что будет  с  системой  в случае  переполнения  буфера.  Задание минимум : показать  ошибку системы.  Задание со  звездочкой продемонстрировать  запуск  шелл кода.

# Разработка стека

Воспользуемся ассемблером GNU из gcc.
Напишем функцию `emulate_stack`. Для начала создадим буфер:
```asm
    mov     $1, %rdi
    mov     $30, %rsi
    call    calloc
```

Сохраним указатель на начало буфера, и вызовем функцию `read`.

```asm
    mov     $0, %rdi
    mov     %rax, %rsi
    mov     $30, %rdx
    push    %rax        # буфер
    call    read
```

После того как пользователь введёт символы, уберём из ввода перенос строки и сохраним промежуточную информацию на стеке.

```asm
    dec     %rax
    push    %rax
```

После этого в цикле проходим по буферу и по очереди выводим символы.

```asm
.L1:
    mov     $1, %rdi
    pop     %r12
    pop     %r13
    dec     %r12
    mov     %r12, %rsi
    add     %r13, %rsi
    push    %r13
    push    %r12
    mov     $1, %rdx
    call    write
    cmp     $0, %r12
    jne     .L1
```

Теперь остаётся только забрать всё что мы положили на стек и вывести на экран перенос строки.

```asm
    pop     %rax
    pop     %rax
    call write_empty_line
    ret
```

Функция `write_empty_line`.

```asm
write_empty_line:
    mov     $0x0A, %rdi
    call    putchar
    ret
```

Тогда тело программы будет выглядеть следующим образом:

```asm
    .global main
    .text
main:
    call    emulate_stack
    mov     $0, %rdi
    call    exit
...
```

# Демонстрация работы
